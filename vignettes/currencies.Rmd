---
title: "Currency-related functions"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Currency-related functions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

This vignette presents methods for working with currency exchange rates.

#### get_changes() & get_changes_historic() 

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

- `get_changes()` compute changes with the latest exchange rate, given currencies symbols.

```{r changes}
library(financr)

changes <- get_changes(from = c("RON", "USD"), to = "EUR")

changes[ , c("from", "to",  "regularmarketprice", "currency", "timestamp")]

```


- `get_changes_historic()` return a `data.frame` with the historic of exchange rates, given currencies symbols (default have  1 obs. per day for 1 year).

```{r change-historic}

changes <- get_changes_historic(from = c("EUR", "RON") )

str(changes)

```

Currencies are indicated with the syntax of `get_changes()` and default are converting to 'USD' (as `get_changes()` default). E.g., pass a named list of character vectors, or two separate lists of equal length.


```{r change-ways}
df2_days <- get_changes_historic(from = c("EUR" = "RON", "USD" = "EUR"))
 
same_as_df2_days <- get_changes_historic(from = c("EUR", "USD"), to =c("RON" , "EUR"))

```

**Parameters.** Optionally, you can tweak the returned `data.frame` using the interval and range parameters. E.g., retrieve one observation per month over a five-year period.

```{r change-ranges}
df_month <- get_changes_historic(
  from = c("EUR", "JPY")
  , interval = "1mo", range = '5y')

str(df_month)
```

---

### last_currencies()

Get a `data.frame` of currencies symbols and names.

```{r currencies}
currencies <- last_currencies()
str(currencies)
```

 It is helpful to understand the currency symbols used by the Yahoo Finance API, such as those found in the currency column of the `data.frame` returned by `get_historic()`.
 
**Parameters.** Filter out symbols with the `keep` parameter and/or add the latest market values ('USD') for each currency with `add_usd_values` parameter.

```{r currencies2}
few_currencies <- last_currencies(keep = c("RON",  "USD")
                                  , add_usd_values = T )
few_currencies
```

